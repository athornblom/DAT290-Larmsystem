\clearpage
%Beskrivande titel av testet samt en unik label
\subsection{Återuppspelningsattack test}
\label{test:sessionID}

\setlength{\columnsep}{1cm}


% Vid utförande av test fylls mallen nedan i, vilket resulterar i ett protokoll som sedan sparas som verifikation. Målet med dessa protokoll är att man utan sakkunskap ska kunna skapa sig en överblick av att systemet fungerar som det ska.


\begin{multicols}{2}
\subsubsection*{Test formulerat av}
% Namn på den/de som formulerade testet.
Filip

\subsubsection*{Utfört av}
% Namn på den/de som utförande testet.



\end{multicols}
\subsubsection*{Komponent}
%Vilken del av systemet testas?
Alla tre enheter.


\subsubsection*{Testsyfte}
%Vad ska testet visa? Är testet till följd av tidigare test?
Kontrollera att session ID fungerar som skydd mot en återuppspelningsattack.


\subsubsection*{Hjälpmedel}
%Lista hjälpmedlen som användes i samband med testet.
\begin{itemize}
	\item Centralenhet
	\item Rörelseenhet
	\item Dörrenhet
	\item Återuppspelare
\end{itemize}



\subsubsection*{Utförande}
%Hur ska testet utföras?
\todo[inline]{Förtydliga hur man accepterar standardkonfiguratioen från periferienheten.}
Utför detta test först för dörrenheten sedan för rörelseenheten.


Se till att SESSIONIDACTIVE är definerat som 0 i startup.c för centralenheten.
Om inte ändra så att den är och kompilera om.
Koppla upp ett CAN-nätverk med centralenhet, periferienhet samt återspelare.
Starta inspelning på återspelaren och starta därefter de andra enheterna.
Initiera standardkonfigurationen för enheten och övergå till standadläge på centralenheten genom att köra kommandot start.
Låt nu systemet köra i några minuter (typ 3-5) utan att något larm går.
Skulle något larm gå startas testet för periferienheten om.
Avsluta inspelningen på återspelaren men frånkoppla inte matningen, då försvinner de inspelade meddelandesekvensen.


Stäng av de övriga enheterna och låt nu endast centralenheten och återspelaren vara inkopplade på nätverket.
Starta återuppspelning av den inspelade sekvensen.
Starta seden centralenheten och kontrollera att en periferienhet ansluter trots att den saknas på nätverket.
Godkänn standardkonfigurationen och övergå sedan till standardläge på centralenheten.
Om centralenheten nu tror att den kommunicerar med en periferienhet utan att larma har en återuppspelningsattack utförts.
Stäng av alla enhter.

Återupprepa nu testet med SESSIONIDACTIVE definerat till 1, dvs sessionID funktionen aktiverad.

Utför slutligen hela testet med en rörelseenhet i stället för en dörrenhet.



\subsubsection*{Resultat}
%Vad är testresultatet? Hittades några buggar?
Rörelseenheten: Med session-ID avaktiverat lyckades återuppspelningsattacken. Med session-ID aktiverat så kunde återuppspelaren ansluta som rörelseenhet, men när centralenheten startade larmade det. 


\subsubsection*{Analys}
%Vad innebär testets resultat? Behövs fler test av komponenten? Behöver andra komponenter testas ytterligare, och i så fall hur?



